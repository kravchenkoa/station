profile = "vcs/pull-request@1.0"
provider = "gitlab"

map PullRequest{
  //encodeURIComponent comes from JavaScript core library and you can use it here!
  id = encodeURIComponent(input.owner + '/' + input.repo)
  identifier = input.identifier

  http GET "/projects/{id}/merge_requests/{identifier}" {
    response 200 "application/json" {
      map result {
        title: body.title,
        id: body.iid,
        url: body.web_url,
        sha: body.sha,
      }
    }
  }
}
